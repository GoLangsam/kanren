package micro

import (
	"strconv"

	"github.com/awalterschulze/gominikanren/sexpr/ast"
)

// ReifyVarFromState is a curried function that reifies the input variable for the given input state.
func ReifyVarFromState(v string) func(s *State) *ast.SExpr {
	return func(s *State) *ast.SExpr {
		x := &ast.SExpr{Atom: &ast.Atom{Var: &ast.Variable{Name: v}}}
		vv := s.Walk(x)
		b := NewBind()
		return b.reify(vv).Walk(vv)
	}
}

// Reify reifies the input variable for the given input states.
func Reify(v string, ss []*State) []*ast.SExpr {
	return deriveFmapRs(ReifyVarFromState(v), ss)
}
